{"ast":null,"code":"import _objectSpread from\"/home/shirin/Desktop/Frontend Assessment- Hacker Rank Clone /my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/shirin/Desktop/Frontend Assessment- Hacker Rank Clone /my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/shirin/Desktop/Frontend Assessment- Hacker Rank Clone /my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/shirin/Desktop/Frontend Assessment- Hacker Rank Clone /my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useReducer}from\"react\";import reducer from'./reducer';import{jsx as _jsx}from\"react/jsx-runtime\";var API=\"http://hn.algolia.com/api/v1/search_by_date?\";var initialState={loading:true,// query: \"CSS\",\nnbPages:0,page:0,hits:[]};var AppContext=/*#__PURE__*/React.createContext();var AppProvider=function AppProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var fetchAPIData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"SET_LOADING\"});_context.prev=1;_context.next=4;return fetch(url);case 4:res=_context.sent;_context.next=7;return res.json();case 7:data=_context.sent;// console.log(\"-----------------\");\n// console.log(\"in Context\");\n// console.log(data);\n// console.log(\"-----------------\");\ndispatch({type:\"GET_NEWS\",payload:{hits:data.hits,nbPages:data.nbPages}});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function fetchAPIData(_x){return _ref2.apply(this,arguments);};}();var hideNews=function hideNews(newsID){dispatch({type:\"HIDE_NEWS\",payload:newsID});};var getNextPage=function getNextPage(){dispatch({type:\"NEXT_PAGE\"});};var getPrevPage=function getPrevPage(){dispatch({type:\"PREV_PAGE\"});};useEffect(function(){fetchAPIData(\"\".concat(API,\"page=\").concat(state.page));},[state.page]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{hideNews:hideNews,getNextPage:getNextPage,getPrevPage:getPrevPage}),children:children});};var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{useGlobalContext,AppProvider};","map":{"version":3,"names":["React","useContext","useEffect","useReducer","reducer","API","initialState","loading","nbPages","page","hits","AppContext","createContext","AppProvider","children","state","dispatch","fetchAPIData","url","type","fetch","res","json","data","payload","console","log","hideNews","newsID","getNextPage","getPrevPage","useGlobalContext"],"sources":["/home/shirin/Desktop/Frontend Assessment- Hacker Rank Clone /my-app/src/components/context.jsx"],"sourcesContent":["import React, { useContext, useEffect, useReducer } from \"react\";\nimport reducer from './reducer';\n\nlet API = \"http://hn.algolia.com/api/v1/search_by_date?\";\n\nconst initialState = {\n    loading: true,\n    // query: \"CSS\",\n    nbPages: 0,\n    page: 0,\n    hits: [],\n};\n\nconst AppContext = React.createContext();\n\nconst AppProvider = ({children}) => {\n\n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    const fetchAPIData = async(url) => {\n        dispatch({type: \"SET_LOADING\"});\n\n        try {\n            const res = await fetch(url);\n            const data = await res.json();\n            // console.log(\"-----------------\");\n            // console.log(\"in Context\");\n            // console.log(data);\n            // console.log(\"-----------------\");\n\n            dispatch({\n                type: \"GET_NEWS\",\n                payload: {\n                    hits: data.hits,\n                    nbPages: data.nbPages,\n                },\n            });\n\n        } catch(error) {\n            console.log(error);\n        }\n    };\n\n    const hideNews = (newsID) => {\n        dispatch({type: \"HIDE_NEWS\", payload: newsID});\n    };\n\n    const getNextPage = () => {\n        dispatch({type: \"NEXT_PAGE\",});\n    };\n\n    const getPrevPage = () => {\n        dispatch({type: \"PREV_PAGE\",});\n    };\n\n    useEffect(() => {\n        fetchAPIData(`${API}page=${state.page}`);\n    }, [state.page]);\n\n    return (\n        <AppContext.Provider value={{...state, hideNews, getNextPage, getPrevPage}}>\n            {children}\n        </AppContext.Provider>\n    );\n};\n\nconst useGlobalContext = () => {\n    return useContext(AppContext);\n};\n\nexport { useGlobalContext, AppProvider };"],"mappings":"mnBAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAChE,MAAOC,QAAO,KAAM,WAAW,CAAC,2CAEhC,GAAIC,IAAG,CAAG,8CAA8C,CAExD,GAAMC,aAAY,CAAG,CACjBC,OAAO,CAAE,IAAI,CACb;AACAC,OAAO,CAAE,CAAC,CACVC,IAAI,CAAE,CAAC,CACPC,IAAI,CAAE,EACV,CAAC,CAED,GAAMC,WAAU,cAAGX,KAAK,CAACY,aAAa,EAAE,CAExC,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAAmB,IAAdC,SAAQ,MAARA,QAAQ,CAE1B,gBAA0BX,UAAU,CAACC,OAAO,CAAEE,YAAY,CAAC,4CAApDS,KAAK,iBAAEC,QAAQ,iBAEtB,GAAMC,aAAY,6FAAG,iBAAMC,GAAG,iIAC1BF,QAAQ,CAAC,CAACG,IAAI,CAAE,aAAa,CAAC,CAAC,CAAC,sCAGVC,MAAK,CAACF,GAAG,CAAC,QAAtBG,GAAG,qCACUA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,eACV;AACA;AACA;AACA;AAEAP,QAAQ,CAAC,CACLG,IAAI,CAAE,UAAU,CAChBK,OAAO,CAAE,CACLd,IAAI,CAAEa,IAAI,CAACb,IAAI,CACfF,OAAO,CAAEe,IAAI,CAACf,OAClB,CACJ,CAAC,CAAC,CAAC,iFAGHiB,OAAO,CAACC,GAAG,aAAO,CAAC,qEAE1B,kBAtBKT,aAAY,6CAsBjB,CAED,GAAMU,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,MAAM,CAAK,CACzBZ,QAAQ,CAAC,CAACG,IAAI,CAAE,WAAW,CAAEK,OAAO,CAAEI,MAAM,CAAC,CAAC,CAClD,CAAC,CAED,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACtBb,QAAQ,CAAC,CAACG,IAAI,CAAE,WAAY,CAAC,CAAC,CAClC,CAAC,CAED,GAAMW,YAAW,CAAG,QAAdA,YAAW,EAAS,CACtBd,QAAQ,CAAC,CAACG,IAAI,CAAE,WAAY,CAAC,CAAC,CAClC,CAAC,CAEDjB,SAAS,CAAC,UAAM,CACZe,YAAY,WAAIZ,GAAG,iBAAQU,KAAK,CAACN,IAAI,EAAG,CAC5C,CAAC,CAAE,CAACM,KAAK,CAACN,IAAI,CAAC,CAAC,CAEhB,mBACI,KAAC,UAAU,CAAC,QAAQ,EAAC,KAAK,gCAAMM,KAAK,MAAEY,QAAQ,CAARA,QAAQ,CAAEE,WAAW,CAAXA,WAAW,CAAEC,WAAW,CAAXA,WAAW,EAAE,UACtEhB,QAAQ,EACS,CAE9B,CAAC,CAED,GAAMiB,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAS,CAC3B,MAAO9B,WAAU,CAACU,UAAU,CAAC,CACjC,CAAC,CAED,OAASoB,gBAAgB,CAAElB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}